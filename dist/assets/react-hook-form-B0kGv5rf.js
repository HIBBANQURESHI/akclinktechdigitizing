import{R as p}from"./react-iNw-b1yb.js";var _e=e=>e.type==="checkbox",ne=e=>e instanceof Date,q=e=>e==null;const or=e=>typeof e=="object";var T=e=>!q(e)&&!Array.isArray(e)&&or(e)&&!ne(e),Dr=e=>T(e)&&e.target?_e(e.target)?e.target.checked:e.target.value:e,Sr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,kr=(e,s)=>e.has(Sr(s)),Er=e=>{const s=e.constructor&&e.constructor.prototype;return T(s)&&s.hasOwnProperty("isPrototypeOf")},qe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function N(e){let s;const r=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(qe&&(e instanceof Blob||e instanceof FileList))&&(r||T(e)))if(s=r?[]:{},!r&&!Er(e))s=e;else for(const i in e)e.hasOwnProperty(i)&&(s[i]=N(e[i]));else return e;return s}var ve=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,d=(e,s,r)=>{if(!s||!T(e))return r;const i=ve(s.split(/[,[\].]+?/)).reduce((l,n)=>q(l)?l:l[n],e);return k(i)||i===e?k(e[s])?r:e[s]:i},Z=e=>typeof e=="boolean",je=e=>/^\w*$/.test(e),cr=e=>ve(e.replace(/["|']|\]/g,"").split(/\.|\[/)),S=(e,s,r)=>{let i=-1;const l=je(s)?[s]:cr(s),n=l.length,g=n-1;for(;++i<n;){const v=l[i];let w=r;if(i!==g){const W=e[v];w=T(W)||Array.isArray(W)?W:isNaN(+l[i+1])?{}:[]}if(v==="__proto__")return;e[v]=w,e=e[v]}return e};const rr={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},re={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Cr=p.createContext(null),Or=()=>p.useContext(Cr);var Tr=(e,s,r,i=!0)=>{const l={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(l,n,{get:()=>{const g=n;return s._proxyFormState[g]!==K.all&&(s._proxyFormState[g]=!i||K.all),e[g]}});return l},P=e=>T(e)&&!Object.keys(e).length,Lr=(e,s,r,i)=>{r(e);const{name:l,...n}=e;return P(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(g=>s[g]===K.all)},j=e=>Array.isArray(e)?e:[e];function fr(e){const s=p.useRef(e);s.current=e,p.useEffect(()=>{const r=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var ee=e=>typeof e=="string",Ur=(e,s,r,i,l)=>ee(e)?(i&&s.watch.add(e),d(r,e,l)):Array.isArray(e)?e.map(n=>(i&&s.watch.add(n),d(r,n))):(i&&(s.watchAll=!0),r),Rr=(e,s,r,i,l)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:l||!0}}:{},se=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(Math.random()*16+e)%16|0;return(s=="x"?r:r&3|8).toString(16)})},ke=(e,s,r={})=>r.shouldFocus||k(r.shouldFocus)?r.focusName||`${e}.${k(r.focusIndex)?s:r.focusIndex}.`:"",ge=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),Be=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const le=(e,s,r,i)=>{for(const l of r||Object.keys(e)){const n=d(e,l);if(n){const{_f:g,...v}=n;if(g){if(g.refs&&g.refs[0]&&s(g.refs[0],l)&&!i)return!0;if(g.ref&&s(g.ref,g.name)&&!i)return!0;if(le(v,s))break}else if(T(v)&&le(v,s))break}}};var dr=(e,s,r)=>{const i=j(d(e,r));return S(i,"root",s[r]),S(e,r,i),e},We=e=>e.type==="file",te=e=>typeof e=="function",be=e=>{if(!qe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Fe=e=>ee(e),He=e=>e.type==="radio",me=e=>e instanceof RegExp;const tr={value:!1,isValid:!1},sr={value:!0,isValid:!0};var yr=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?sr:{value:e[0].value,isValid:!0}:sr:tr}return tr};const ir={isValid:!1,value:null};var gr=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,ir):ir;function ar(e,s,r="validate"){if(Fe(e)||Array.isArray(e)&&e.every(Fe)||Z(e)&&!e)return{type:r,message:Fe(e)?e:"",ref:s}}var ue=e=>T(e)&&!me(e)?e:{value:e,message:""},Pe=async(e,s,r,i,l)=>{const{ref:n,refs:g,required:v,maxLength:w,minLength:W,min:D,max:A,pattern:C,validate:Q,name:I,valueAsNumber:oe,mount:Y,disabled:X}=e._f,m=d(s,I);if(!Y||X)return{};const z=g?g[0]:n,G=b=>{i&&z.reportValidity&&(z.setCustomValidity(Z(b)?"":b||""),z.reportValidity())},y={},h=He(n),F=_e(n),E=h||F,H=(oe||We(n))&&k(n.value)&&k(m)||be(n)&&n.value===""||m===""||Array.isArray(m)&&!m.length,B=Rr.bind(null,I,r,y),he=(b,V,L,M=re.maxLength,J=re.minLength)=>{const $=b?V:L;y[I]={type:b?M:J,message:$,ref:n,...B(b?M:J,$)}};if(l?!Array.isArray(m)||!m.length:v&&(!E&&(H||q(m))||Z(m)&&!m||F&&!yr(g).isValid||h&&!gr(g).isValid)){const{value:b,message:V}=Fe(v)?{value:!!v,message:v}:ue(v);if(b&&(y[I]={type:re.required,message:V,ref:z,...B(re.required,V)},!r))return G(V),y}if(!H&&(!q(D)||!q(A))){let b,V;const L=ue(A),M=ue(D);if(!q(m)&&!isNaN(m)){const J=n.valueAsNumber||m&&+m;q(L.value)||(b=J>L.value),q(M.value)||(V=J<M.value)}else{const J=n.valueAsDate||new Date(m),$=de=>new Date(new Date().toDateString()+" "+de),ce=n.type=="time",fe=n.type=="week";ee(L.value)&&m&&(b=ce?$(m)>$(L.value):fe?m>L.value:J>new Date(L.value)),ee(M.value)&&m&&(V=ce?$(m)<$(M.value):fe?m<M.value:J<new Date(M.value))}if((b||V)&&(he(!!b,L.message,M.message,re.max,re.min),!r))return G(y[I].message),y}if((w||W)&&!H&&(ee(m)||l&&Array.isArray(m))){const b=ue(w),V=ue(W),L=!q(b.value)&&m.length>+b.value,M=!q(V.value)&&m.length<+V.value;if((L||M)&&(he(L,b.message,V.message),!r))return G(y[I].message),y}if(C&&!H&&ee(m)){const{value:b,message:V}=ue(C);if(me(b)&&!m.match(b)&&(y[I]={type:re.pattern,message:V,ref:n,...B(re.pattern,V)},!r))return G(V),y}if(Q){if(te(Q)){const b=await Q(m,s),V=ar(b,z);if(V&&(y[I]={...V,...B(re.validate,V.message)},!r))return G(V.message),y}else if(T(Q)){let b={};for(const V in Q){if(!P(b)&&!r)break;const L=ar(await Q[V](m,s),z,V);L&&(b={...L,...B(V,L.message)},G(L.message),r&&(y[I]=b))}if(!P(b)&&(y[I]={ref:z,...b},!r))return y}}return G(!0),y},Ee=(e,s)=>[...e,...j(s)],Ce=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Oe(e,s,r){return[...e.slice(0,s),...j(r),...e.slice(s)]}var Te=(e,s,r)=>Array.isArray(e)?(k(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(s,1)[0]),e):[],Le=(e,s)=>[...j(s),...j(e)];function Nr(e,s){let r=0;const i=[...e];for(const l of s)i.splice(l-r,1),r++;return ve(i).length?i:[]}var Ue=(e,s)=>k(s)?[]:Nr(e,j(s).sort((r,i)=>r-i)),Re=(e,s,r)=>{[e[s],e[r]]=[e[r],e[s]]};function Mr(e,s){const r=s.slice(0,-1).length;let i=0;for(;i<r;)e=k(e)?i++:e[s[i++]];return e}function Ir(e){for(const s in e)if(e.hasOwnProperty(s)&&!k(e[s]))return!1;return!0}function O(e,s){const r=Array.isArray(s)?s:je(s)?[s]:cr(s),i=r.length===1?e:Mr(e,r),l=r.length-1,n=r[l];return i&&delete i[n],l!==0&&(T(i)&&P(i)||Array.isArray(i)&&Ir(i))&&O(e,r.slice(0,-1)),e}var ur=(e,s,r)=>(e[s]=r,e);function Qr(e){const s=Or(),{control:r=s.control,name:i,keyName:l="id",shouldUnregister:n}=e,[g,v]=p.useState(r._getFieldArray(i)),w=p.useRef(r._getFieldArray(i).map(se)),W=p.useRef(g),D=p.useRef(i),A=p.useRef(!1);D.current=i,W.current=g,r._names.array.add(i),e.rules&&r.register(i,e.rules),fr({next:({values:y,name:h})=>{if(h===D.current||!h){const F=d(y,D.current);Array.isArray(F)&&(v(F),w.current=F.map(se))}},subject:r._subjects.array});const C=p.useCallback(y=>{A.current=!0,r._updateFieldArray(i,y)},[r,i]),Q=(y,h)=>{const F=j(N(y)),E=Ee(r._getFieldArray(i),F);r._names.focus=ke(i,E.length-1,h),w.current=Ee(w.current,F.map(se)),C(E),v(E),r._updateFieldArray(i,E,Ee,{argA:Ce(y)})},I=(y,h)=>{const F=j(N(y)),E=Le(r._getFieldArray(i),F);r._names.focus=ke(i,0,h),w.current=Le(w.current,F.map(se)),C(E),v(E),r._updateFieldArray(i,E,Le,{argA:Ce(y)})},oe=y=>{const h=Ue(r._getFieldArray(i),y);w.current=Ue(w.current,y),C(h),v(h),r._updateFieldArray(i,h,Ue,{argA:y})},Y=(y,h,F)=>{const E=j(N(h)),H=Oe(r._getFieldArray(i),y,E);r._names.focus=ke(i,y,F),w.current=Oe(w.current,y,E.map(se)),C(H),v(H),r._updateFieldArray(i,H,Oe,{argA:y,argB:Ce(h)})},X=(y,h)=>{const F=r._getFieldArray(i);Re(F,y,h),Re(w.current,y,h),C(F),v(F),r._updateFieldArray(i,F,Re,{argA:y,argB:h},!1)},m=(y,h)=>{const F=r._getFieldArray(i);Te(F,y,h),Te(w.current,y,h),C(F),v(F),r._updateFieldArray(i,F,Te,{argA:y,argB:h},!1)},z=(y,h)=>{const F=N(h),E=ur(r._getFieldArray(i),y,F);w.current=[...E].map((H,B)=>!H||B===y?se():w.current[B]),C(E),v([...E]),r._updateFieldArray(i,E,ur,{argA:y,argB:F},!0,!1)},G=y=>{const h=j(N(y));w.current=h.map(se),C([...h]),v([...h]),r._updateFieldArray(i,[...h],F=>F,{},!0,!1)};return p.useEffect(()=>{if(r._state.action=!1,Be(i,r._names)&&r._subjects.state.next({...r._formState}),A.current&&(!ge(r._options.mode).isOnSubmit||r._formState.isSubmitted))if(r._options.resolver)r._executeSchema([i]).then(y=>{const h=d(y.errors,i),F=d(r._formState.errors,i);(F?!h&&F.type||h&&(F.type!==h.type||F.message!==h.message):h&&h.type)&&(h?S(r._formState.errors,i,h):O(r._formState.errors,i),r._subjects.state.next({errors:r._formState.errors}))});else{const y=d(r._fields,i);y&&y._f&&!(ge(r._options.reValidateMode).isOnSubmit&&ge(r._options.mode).isOnSubmit)&&Pe(y,r._formValues,r._options.criteriaMode===K.all,r._options.shouldUseNativeValidation,!0).then(h=>!P(h)&&r._subjects.state.next({errors:dr(r._formState.errors,h,i)}))}r._subjects.values.next({name:i,values:{...r._formValues}}),r._names.focus&&le(r._fields,(y,h)=>{if(r._names.focus&&h.startsWith(r._names.focus)&&y.focus)return y.focus(),1}),r._names.focus="",r._updateValid(),A.current=!1},[g,i,r]),p.useEffect(()=>(!d(r._formValues,i)&&r._updateFieldArray(i),()=>{(r._options.shouldUnregister||n)&&r.unregister(i)}),[i,r,l,n]),{swap:p.useCallback(X,[C,i,r]),move:p.useCallback(m,[C,i,r]),prepend:p.useCallback(I,[C,i,r]),append:p.useCallback(Q,[C,i,r]),remove:p.useCallback(oe,[C,i,r]),insert:p.useCallback(Y,[C,i,r]),update:p.useCallback(z,[C,i,r]),replace:p.useCallback(G,[C,i,r]),fields:p.useMemo(()=>g.map((y,h)=>({...y,[l]:w.current[h]||se()})),[g,l])}}var Ne=()=>{let e=[];return{get observers(){return e},next:l=>{for(const n of e)n.next&&n.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(n=>n!==l)}}),unsubscribe:()=>{e=[]}}},Ve=e=>q(e)||!or(e);function ie(e,s){if(Ve(e)||Ve(s))return e===s;if(ne(e)&&ne(s))return e.getTime()===s.getTime();const r=Object.keys(e),i=Object.keys(s);if(r.length!==i.length)return!1;for(const l of r){const n=e[l];if(!i.includes(l))return!1;if(l!=="ref"){const g=s[l];if(ne(n)&&ne(g)||T(n)&&T(g)||Array.isArray(n)&&Array.isArray(g)?!ie(n,g):n!==g)return!1}}return!0}var _r=e=>e.type==="select-multiple",Br=e=>He(e)||_e(e),Me=e=>be(e)&&e.isConnected,vr=e=>{for(const s in e)if(te(e[s]))return!0;return!1};function xe(e,s={}){const r=Array.isArray(e);if(T(e)||r)for(const i in e)Array.isArray(e[i])||T(e[i])&&!vr(e[i])?(s[i]=Array.isArray(e[i])?[]:{},xe(e[i],s[i])):q(e[i])||(s[i]=!0);return s}function hr(e,s,r){const i=Array.isArray(e);if(T(e)||i)for(const l in e)Array.isArray(e[l])||T(e[l])&&!vr(e[l])?k(s)||Ve(r[l])?r[l]=Array.isArray(e[l])?xe(e[l],[]):{...xe(e[l])}:hr(e[l],q(s)?{}:s[l],r[l]):r[l]=!ie(e[l],s[l]);return r}var Ae=(e,s)=>hr(e,s,xe(s)),Ar=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:i})=>k(e)?e:s?e===""?NaN:e&&+e:r&&ee(e)?new Date(e):i?i(e):e;function Ie(e){const s=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):s.disabled))return We(s)?s.files:He(s)?gr(e.refs).value:_r(s)?[...s.selectedOptions].map(({value:r})=>r):_e(s)?yr(e.refs).value:Ar(k(s.value)?e.ref.value:s.value,e)}var Pr=(e,s,r,i)=>{const l={};for(const n of e){const g=d(s,n);g&&S(l,n,g._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:i}},ye=e=>k(e)?e:me(e)?e.source:T(e)?me(e.value)?e.value.source:e.value:e;const nr="AsyncFunction";var qr=e=>(!e||!e.validate)&&!!(te(e.validate)&&e.validate.constructor.name===nr||T(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===nr)),jr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function lr(e,s,r){const i=d(e,r);if(i||je(r))return{error:i,name:r};const l=r.split(".");for(;l.length;){const n=l.join("."),g=d(s,n),v=d(e,n);if(g&&!Array.isArray(g)&&r!==n)return{name:r};if(v&&v.type)return{name:n,error:v};l.pop()}return{name:r}}var Wr=(e,s,r,i,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(s||e):(r?i.isOnBlur:l.isOnBlur)?!e:(r?i.isOnChange:l.isOnChange)?e:!0,Hr=(e,s)=>!ve(d(e,s)).length&&O(e,s);const $r={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function Kr(e={}){let s={...$r,...e},r={submitCount:0,isDirty:!1,isLoading:te(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},l=T(s.defaultValues)||T(s.values)?N(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:N(l),g={action:!1,mount:!1,watch:!1},v={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,W=0;const D={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},A={values:Ne(),array:Ne(),state:Ne()},C=ge(s.mode),Q=ge(s.reValidateMode),I=s.criteriaMode===K.all,oe=t=>a=>{clearTimeout(W),W=setTimeout(t,a)},Y=async t=>{if(D.isValid||t){const a=s.resolver?P((await E()).errors):await B(i,!0);a!==r.isValid&&A.state.next({isValid:a})}},X=(t,a)=>{(D.isValidating||D.validatingFields)&&((t||Array.from(v.mount)).forEach(u=>{u&&(a?S(r.validatingFields,u,a):O(r.validatingFields,u))}),A.state.next({validatingFields:r.validatingFields,isValidating:!P(r.validatingFields)}))},m=(t,a=[],u,f,c=!0,o=!0)=>{if(f&&u){if(g.action=!0,o&&Array.isArray(d(i,t))){const _=u(d(i,t),f.argA,f.argB);c&&S(i,t,_)}if(o&&Array.isArray(d(r.errors,t))){const _=u(d(r.errors,t),f.argA,f.argB);c&&S(r.errors,t,_),Hr(r.errors,t)}if(D.touchedFields&&o&&Array.isArray(d(r.touchedFields,t))){const _=u(d(r.touchedFields,t),f.argA,f.argB);c&&S(r.touchedFields,t,_)}D.dirtyFields&&(r.dirtyFields=Ae(l,n)),A.state.next({name:t,isDirty:b(t,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else S(n,t,a)},z=(t,a)=>{S(r.errors,t,a),A.state.next({errors:r.errors})},G=t=>{r.errors=t,A.state.next({errors:r.errors,isValid:!1})},y=(t,a,u,f)=>{const c=d(i,t);if(c){const o=d(n,t,k(u)?d(l,t):u);k(o)||f&&f.defaultChecked||a?S(n,t,a?o:Ie(c._f)):M(t,o),g.mount&&Y()}},h=(t,a,u,f,c)=>{let o=!1,_=!1;const x={name:t},U=!!(d(i,t)&&d(i,t)._f&&d(i,t)._f.disabled);if(!u||f){D.isDirty&&(_=r.isDirty,r.isDirty=x.isDirty=b(),o=_!==x.isDirty);const R=U||ie(d(l,t),a);_=!!(!U&&d(r.dirtyFields,t)),R||U?O(r.dirtyFields,t):S(r.dirtyFields,t,!0),x.dirtyFields=r.dirtyFields,o=o||D.dirtyFields&&_!==!R}if(u){const R=d(r.touchedFields,t);R||(S(r.touchedFields,t,u),x.touchedFields=r.touchedFields,o=o||D.touchedFields&&R!==u)}return o&&c&&A.state.next(x),o?x:{}},F=(t,a,u,f)=>{const c=d(r.errors,t),o=D.isValid&&Z(a)&&r.isValid!==a;if(e.delayError&&u?(w=oe(()=>z(t,u)),w(e.delayError)):(clearTimeout(W),w=null,u?S(r.errors,t,u):O(r.errors,t)),(u?!ie(c,u):c)||!P(f)||o){const _={...f,...o&&Z(a)?{isValid:a}:{},errors:r.errors,name:t};r={...r,..._},A.state.next(_)}},E=async t=>{X(t,!0);const a=await s.resolver(n,s.context,Pr(t||v.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return X(t),a},H=async t=>{const{errors:a}=await E(t);if(t)for(const u of t){const f=d(a,u);f?S(r.errors,u,f):O(r.errors,u)}else r.errors=a;return a},B=async(t,a,u={valid:!0})=>{for(const f in t){const c=t[f];if(c){const{_f:o,..._}=c;if(o){const x=v.array.has(o.name),U=c._f&&qr(c._f);U&&D.validatingFields&&X([f],!0);const R=await Pe(c,n,I,s.shouldUseNativeValidation&&!a,x);if(U&&D.validatingFields&&X([f]),R[o.name]&&(u.valid=!1,a))break;!a&&(d(R,o.name)?x?dr(r.errors,R,o.name):S(r.errors,o.name,R[o.name]):O(r.errors,o.name))}!P(_)&&await B(_,a,u)}}return u.valid},he=()=>{for(const t of v.unMount){const a=d(i,t);a&&(a._f.refs?a._f.refs.every(u=>!Me(u)):!Me(a._f.ref))&&pe(t)}v.unMount=new Set},b=(t,a)=>(t&&a&&S(n,t,a),!ie($e(),l)),V=(t,a,u)=>Ur(t,v,{...g.mount?n:k(a)?l:ee(t)?{[t]:a}:a},u,a),L=t=>ve(d(g.mount?n:l,t,e.shouldUnregister?d(l,t,[]):[])),M=(t,a,u={})=>{const f=d(i,t);let c=a;if(f){const o=f._f;o&&(!o.disabled&&S(n,t,Ar(a,o)),c=be(o.ref)&&q(a)?"":a,_r(o.ref)?[...o.ref.options].forEach(_=>_.selected=c.includes(_.value)):o.refs?_e(o.ref)?o.refs.length>1?o.refs.forEach(_=>(!_.defaultChecked||!_.disabled)&&(_.checked=Array.isArray(c)?!!c.find(x=>x===_.value):c===_.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(_=>_.checked=_.value===c):We(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||A.values.next({name:t,values:{...n}})))}(u.shouldDirty||u.shouldTouch)&&h(t,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&de(t)},J=(t,a,u)=>{for(const f in a){const c=a[f],o=`${t}.${f}`,_=d(i,o);(v.array.has(t)||!Ve(c)||_&&!_._f)&&!ne(c)?J(o,c,u):M(o,c,u)}},$=(t,a,u={})=>{const f=d(i,t),c=v.array.has(t),o=N(a);S(n,t,o),c?(A.array.next({name:t,values:{...n}}),(D.isDirty||D.dirtyFields)&&u.shouldDirty&&A.state.next({name:t,dirtyFields:Ae(l,n),isDirty:b(t,o)})):f&&!f._f&&!q(o)?J(t,o,u):M(t,o,u),Be(t,v)&&A.state.next({...r}),A.values.next({name:g.mount?t:void 0,values:{...n}})},ce=async t=>{g.mount=!0;const a=t.target;let u=a.name,f=!0;const c=d(i,u),o=()=>a.type?Ie(c._f):Dr(t),_=x=>{f=Number.isNaN(x)||ie(x,d(n,u,x))};if(c){let x,U;const R=o(),ae=t.type===rr.BLUR||t.type===rr.FOCUS_OUT,xr=!jr(c._f)&&!s.resolver&&!d(r.errors,u)&&!c._f.deps||Wr(ae,d(r.touchedFields,u),r.isSubmitted,Q,C),De=Be(u,v,ae);S(n,u,R),ae?(c._f.onBlur&&c._f.onBlur(t),w&&w(0)):c._f.onChange&&c._f.onChange(t);const Se=h(u,R,ae,!1),pr=!P(Se)||De;if(!ae&&A.values.next({name:u,type:t.type,values:{...n}}),xr)return D.isValid&&(e.mode==="onBlur"?ae&&Y():Y()),pr&&A.state.next({name:u,...De?{}:Se});if(!ae&&De&&A.state.next({...r}),s.resolver){const{errors:Ze}=await E([u]);if(_(R),f){const wr=lr(r.errors,i,u),er=lr(Ze,i,wr.name||u);x=er.error,u=er.name,U=P(Ze)}}else X([u],!0),x=(await Pe(c,n,I,s.shouldUseNativeValidation))[u],X([u]),_(R),f&&(x?U=!1:D.isValid&&(U=await B(i,!0)));f&&(c._f.deps&&de(c._f.deps),F(u,U,x,Se))}},fe=(t,a)=>{if(d(r.errors,a)&&t.focus)return t.focus(),1},de=async(t,a={})=>{let u,f;const c=j(t);if(s.resolver){const o=await H(k(t)?t:c);u=P(o),f=t?!c.some(_=>d(o,_)):u}else t?(f=(await Promise.all(c.map(async o=>{const _=d(i,o);return await B(_&&_._f?{[o]:_}:_)}))).every(Boolean),!(!f&&!r.isValid)&&Y()):f=u=await B(i);return A.state.next({...!ee(t)||D.isValid&&u!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:u}:{},errors:r.errors}),a.shouldFocus&&!f&&le(i,fe,t?c:v.mount),f},$e=t=>{const a={...g.mount?n:l};return k(t)?a:ee(t)?d(a,t):t.map(u=>d(a,u))},Ke=(t,a)=>({invalid:!!d((a||r).errors,t),isDirty:!!d((a||r).dirtyFields,t),error:d((a||r).errors,t),isValidating:!!d(r.validatingFields,t),isTouched:!!d((a||r).touchedFields,t)}),Fr=t=>{t&&j(t).forEach(a=>O(r.errors,a)),A.state.next({errors:t?r.errors:{}})},Ye=(t,a,u)=>{const f=(d(i,t,{_f:{}})._f||{}).ref,c=d(r.errors,t)||{},{ref:o,message:_,type:x,...U}=c;S(r.errors,t,{...U,...a,ref:f}),A.state.next({name:t,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&f&&f.focus&&f.focus()},br=(t,a)=>te(t)?A.values.subscribe({next:u=>t(V(void 0,a),u)}):V(t,a,!0),pe=(t,a={})=>{for(const u of t?j(t):v.mount)v.mount.delete(u),v.array.delete(u),a.keepValue||(O(i,u),O(n,u)),!a.keepError&&O(r.errors,u),!a.keepDirty&&O(r.dirtyFields,u),!a.keepTouched&&O(r.touchedFields,u),!a.keepIsValidating&&O(r.validatingFields,u),!s.shouldUnregister&&!a.keepDefaultValue&&O(l,u);A.values.next({values:{...n}}),A.state.next({...r,...a.keepDirty?{isDirty:b()}:{}}),!a.keepIsValid&&Y()},ze=({disabled:t,name:a,field:u,fields:f,value:c})=>{if(Z(t)&&g.mount||t){const o=t?void 0:k(c)?Ie(u?u._f:d(f,a)._f):c;S(n,a,o),h(a,o,!1,!1,!0)}},we=(t,a={})=>{let u=d(i,t);const f=Z(a.disabled)||Z(e.disabled);return S(i,t,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:t}},name:t,mount:!0,...a}}),v.mount.add(t),u?ze({field:u,disabled:Z(a.disabled)?a.disabled:e.disabled,name:t,value:a.value}):y(t,!0,a.value),{...f?{disabled:a.disabled||e.disabled}:{},...s.progressive?{required:!!a.required,min:ye(a.min),max:ye(a.max),minLength:ye(a.minLength),maxLength:ye(a.maxLength),pattern:ye(a.pattern)}:{},name:t,onChange:ce,onBlur:ce,ref:c=>{if(c){we(t,a),u=d(i,t);const o=k(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,_=Br(o),x=u._f.refs||[];if(_?x.find(U=>U===o):o===u._f.ref)return;S(i,t,{_f:{...u._f,..._?{refs:[...x.filter(Me),o,...Array.isArray(d(l,t))?[{}]:[]],ref:{type:o.type,name:t}}:{ref:o}}}),y(t,!1,void 0,o)}else u=d(i,t,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(kr(v.array,t)&&g.action)&&v.unMount.add(t)}}},Ge=()=>s.shouldFocusError&&le(i,fe,v.mount),mr=t=>{Z(t)&&(A.state.next({disabled:t}),le(i,(a,u)=>{const f=d(i,u);f&&(a.disabled=f._f.disabled||t,Array.isArray(f._f.refs)&&f._f.refs.forEach(c=>{c.disabled=f._f.disabled||t}))},0,!1))},Je=(t,a)=>async u=>{let f;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let c=N(n);if(A.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:_}=await E();r.errors=o,c=_}else await B(i);if(O(r.errors,"root"),P(r.errors)){A.state.next({errors:{}});try{await t(c,u)}catch(o){f=o}}else a&&await a({...r.errors},u),Ge(),setTimeout(Ge);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:P(r.errors)&&!f,submitCount:r.submitCount+1,errors:r.errors}),f)throw f},Vr=(t,a={})=>{d(i,t)&&(k(a.defaultValue)?$(t,N(d(l,t))):($(t,a.defaultValue),S(l,t,N(a.defaultValue))),a.keepTouched||O(r.touchedFields,t),a.keepDirty||(O(r.dirtyFields,t),r.isDirty=a.defaultValue?b(t,N(d(l,t))):b()),a.keepError||(O(r.errors,t),D.isValid&&Y()),A.state.next({...r}))},Qe=(t,a={})=>{const u=t?N(t):l,f=N(u),c=P(t),o=c?l:f;if(a.keepDefaultValues||(l=u),!a.keepValues){if(a.keepDirtyValues)for(const _ of v.mount)d(r.dirtyFields,_)?S(o,_,d(n,_)):$(_,d(o,_));else{if(qe&&k(t))for(const _ of v.mount){const x=d(i,_);if(x&&x._f){const U=Array.isArray(x._f.refs)?x._f.refs[0]:x._f.ref;if(be(U)){const R=U.closest("form");if(R){R.reset();break}}}}i={}}n=e.shouldUnregister?a.keepDefaultValues?N(l):{}:N(o),A.array.next({values:{...o}}),A.values.next({values:{...o}})}v={mount:a.keepDirtyValues?v.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},g.mount=!D.isValid||!!a.keepIsValid||!!a.keepDirtyValues,g.watch=!!e.shouldUnregister,A.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:c?!1:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!ie(t,l)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:c?{}:a.keepDirtyValues?a.keepDefaultValues&&n?Ae(l,n):r.dirtyFields:a.keepDefaultValues&&t?Ae(l,t):a.keepDirty?r.dirtyFields:{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Xe=(t,a)=>Qe(te(t)?t(n):t,a);return{control:{register:we,unregister:pe,getFieldState:Ke,handleSubmit:Je,setError:Ye,_executeSchema:E,_getWatch:V,_getDirty:b,_updateValid:Y,_removeUnmounted:he,_updateFieldArray:m,_updateDisabledField:ze,_getFieldArray:L,_reset:Qe,_resetDefaultValues:()=>te(s.defaultValues)&&s.defaultValues().then(t=>{Xe(t,s.resetOptions),A.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:mr,_subjects:A,_proxyFormState:D,_setErrors:G,get _fields(){return i},get _formValues(){return n},get _state(){return g},set _state(t){g=t},get _defaultValues(){return l},get _names(){return v},set _names(t){v=t},get _formState(){return r},set _formState(t){r=t},get _options(){return s},set _options(t){s={...s,...t}}},trigger:de,register:we,handleSubmit:Je,watch:br,setValue:$,getValues:$e,reset:Xe,resetField:Vr,clearErrors:Fr,unregister:pe,setError:Ye,setFocus:(t,a={})=>{const u=d(i,t),f=u&&u._f;if(f){const c=f.refs?f.refs[0]:f.ref;c.focus&&(c.focus(),a.shouldSelect&&c.select())}},getFieldState:Ke}}function Xr(e={}){const s=p.useRef(),r=p.useRef(),[i,l]=p.useState({isDirty:!1,isValidating:!1,isLoading:te(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:te(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...Kr(e),formState:i});const n=s.current.control;return n._options=e,fr({subject:n._subjects.state,next:g=>{Lr(g,n._proxyFormState,n._updateFormState)&&l({...n._formState})}}),p.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),p.useEffect(()=>{if(n._proxyFormState.isDirty){const g=n._getDirty();g!==i.isDirty&&n._subjects.state.next({isDirty:g})}},[n,i.isDirty]),p.useEffect(()=>{e.values&&!ie(e.values,r.current)?(n._reset(e.values,n._options.resetOptions),r.current=e.values,l(g=>({...g}))):n._resetDefaultValues()},[e.values,n]),p.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),p.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),p.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),s.current.formState=Tr(i,n),s.current}export{Qr as a,Xr as u};
